(this["webpackJsonpworld-time-lite"]=this["webpackJsonpworld-time-lite"]||[]).push([[0],{19:function(e,t,a){e.exports=a(39)},24:function(e,t,a){},27:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(14),c=a.n(r),o=(a(24),a(11)),s=a.n(o),u=a(18),l=a(15),m=a(4),d=a(5),f=a(6),h=a(2),p=a(9),v=a(8),y=a(3),b=a.n(y),E=(a(27),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={value:"",listOfCities:[]},n.handleInputChange=n.handleInputChange.bind(Object(h.a)(n)),n.getCitiesNames=n.getCitiesNames.bind(Object(h.a)(n)),n.addCity=n.addCity.bind(Object(h.a)(n)),n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.timer=null}},{key:"handleInputChange",value:function(e){clearTimeout(this.timer),this.setState({listOfCities:[]}),this.setState({value:e}),this.timer=setTimeout(this.getCitiesNames,1e3)}},{key:"getCitiesNames",value:function(){var e=this,t=this.state.value,a=this.state.listOfCities;t&&fetch("https://rapidapi.p.rapidapi.com/v1/geo/cities?limit=5&minPopulation=100000&namePrefix=".concat(t),{method:"GET",headers:{"x-rapidapi-host":"wft-geo-db.p.rapidapi.com","x-rapidapi-key":"c5baede715msh421af9752656179p152c75jsnb8e941a23c06"}}).then((function(e){return e.json()})).then((function(t){t.data.forEach((function(e){a.push({id:e.wikiDataId,name:e.city,region:e.region,country:e.country})})),e.setState({listOfCities:a})})).catch((function(e){console.error(e)}))}},{key:"addCity",value:function(e){this.setState({listOfCities:[]}),this.setState({value:""}),this.props.onAdd(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("form",{className:"search-box"},i.a.createElement("input",{type:"text",value:this.state.value,placeholder:"Find city - Press \u23ce",onChange:function(t){return e.handleInputChange(t.target.value)}}),i.a.createElement("div",{className:"cities-list"},i.a.createElement("ul",null,this.state.listOfCities&&this.state.listOfCities.map((function(t){return i.a.createElement("li",{onClick:function(a){return e.addCity(t)}},"".concat(t.name,", ").concat(t.region,", ").concat(t.country))})))))}}]),a}(i.a.Component)),g=a(7),k=a(16);a(33);var O=function(e){return i.a.createElement("div",{className:"entry-details"},i.a.createElement("span",null,e.data.isHome&&i.a.createElement(g.a,{icon:k.a}),!e.data.isHome&&e.data.timeDifference&&"".concat(e.data.timeDifference)),i.a.createElement("div",{className:"entry-details__place"},i.a.createElement("p",{className:"title"},e.data.location.city),i.a.createElement("p",{className:"subtitle"},e.data.location.country)),i.a.createElement("div",{className:"entry-details__time"},i.a.createElement("p",{className:"title"},"".concat(e.data.timeAndDate.time)),i.a.createElement("p",{className:"subtitle"},e.data.timeAndDate.date)))},C=a(17);a(34);var j=function(e){return i.a.createElement("div",{className:"entry-actions",onClick:function(){return e.onRemove(e.data.id)}},i.a.createElement(g.a,{icon:C.faTrash}))},D=function(e){return fetch("https://rapidapi.p.rapidapi.com/v1/geo/cities/".concat(e.id,"/dateTime"),{method:"GET",headers:{"x-rapidapi-host":"wft-geo-db.p.rapidapi.com","x-rapidapi-key":"c5baede715msh421af9752656179p152c75jsnb8e941a23c06"}}).then((function(e){return e.json()})).then((function(t){var a=b.a.parseZone(t.data);return{id:e.id,isHome:e.isHome,location:{city:e.name,country:e.country},timeAndDate:{datetime:a.subtract(2,"hour").format("YYYY-MM-DD[T]HH"),time:a.add(2,"hour").format("H:mma"),timezone:a.format("z"),date:a.format("ddd, MMM DD"),UTCtimeDifference:a.format("Z")}}})).catch((function(e){console.error(e)}))};a(35);var w=function(e){var t=function(e){e=b()(e);for(var t=[],a=0;a<=20;a++){var n=e.add(1,"hour");"am"===n.format("a")&&"12"===n.format("h")?t.push({main:n.format("MMM"),secondary:n.format("D")}):t.push({main:n.format("h"),secondary:n.format("a")})}return t}(e.data.timeAndDate.datetime);return i.a.createElement("div",{className:"entry-times"},i.a.createElement("ul",null,t&&t.map((function(e,t){var a=function(e){var t="gray",a=parseInt(e.main,10);return"am"===e.secondary?a>=1&&a<=5||12===a?t="dark-blue":6!==a&&7!==a||(t="light-blue"):"pm"===e.secondary?a>=6&&a<=8?t="light-blue":9===a||10===a?t="dark-blue":11===a&&(t="dark-blue end"):t="dark-blue start",t}(e);return a+=1===t?" current-time":"",i.a.createElement("li",{className:a},e.main," ",i.a.createElement("span",null,e.secondary))}))))};a(36);var N=function(e){return i.a.createElement("div",{className:"entry"},i.a.createElement(j,{data:e.data,onRemove:e.onRemove}),i.a.createElement(O,{data:e.data}),i.a.createElement(w,{data:e.data}))},A=(a(37),function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).listOfEntries=[{id:"Q9022",name:"Guadalajara",region:"Jalisco",country:"Mexico",isHome:!0},{id:"Q84",name:"London",region:"England",country:"United Kingdom",isHome:!1},{id:"Q189138",name:"Hermosillo",region:"Sonora",country:"Mexico",isHome:!1}],n.state={entries:[]},n.handleAction=n.handleAction.bind(Object(h.a)(n)),n.handleAddition=n.handleAddition.bind(Object(h.a)(n)),n.calculateTimezoneDifferences=n.calculateTimezoneDifferences.bind(Object(h.a)(n)),n}return Object(f.a)(a,[{key:"waitPromise",value:function(e){return new Promise((function(t,a){setTimeout((function(){t(e)}),e)}))}},{key:"calculateTimezoneDifferences",value:function(){var e=this,t=this.state.entries.find((function(e){return e.isHome}));this.setState((function(a){return{entries:e.state.entries.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{timeDifference:b.a.parseZone(e.timeAndDate.datetime).diff(b.a.parseZone(t.timeAndDate.datetime),"hours")})}))}}))}},{key:"componentDidMount",value:function(){var e=this;(function(){var t=Object(l.a)(s.a.mark((function t(){var a,n,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=Object(u.a)(e.listOfEntries),t.prev=1,a.s();case 3:if((n=a.n()).done){t.next=10;break}return i=n.value,D(i).then((function(t){var a=e.state.entries.concat(t);e.setState({entries:a})})),t.next=8,e.waitPromise(2e3);case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),a.e(t.t0);case 15:return t.prev=15,a.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})));return function(){return t.apply(this,arguments)}})()().then((function(){e.calculateTimezoneDifferences()}))}},{key:"handleAction",value:function(e){this.setState({entries:this.state.entries.filter((function(t){return t.id!==e}))})}},{key:"handleAddition",value:function(e){var t=this;D(e).then((function(e){var a=t.state.entries.concat(e);t.setState({entries:a})})).then((function(){t.calculateTimezoneDifferences()}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"world-time-widget"},i.a.createElement(E,{onAdd:this.handleAddition}),this.state.entries&&this.state.entries.map((function(t){return i.a.createElement(N,{key:t.id,data:t,onRemove:e.handleAction})})))}}]),a}(i.a.Component));a(38);var x=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.ef1b9ad7.chunk.js.map